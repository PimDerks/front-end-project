define("conditioner/Observer",[],function(){var e=1,t={};return{_setEntry:function(n,r){var i=n.__pubSubUID;return i||(i=e++,n.__pubSubUID=i,t[i]={obj:n}),t[i][r]||(t[i][r]=[]),t[i]},_getEntryProp:function(e,n){var r=t[e.__pubSubUID];return r?t[e.__pubSubUID][n]:null},subscribe:function(e,t,n){var r=this._setEntry(e,"subscriptions"),i,s=0,o=r.subscriptions,u=o.length;for(;s<u;s++){i=o[s];if(i.type===t&&i.fn===n)return}o.push({type:t,fn:n})},unsubscribe:function(e,t,n){var r=this._getEntryProp(e,"subscriptions");if(!r)return;var i,s=r.length;while(--s>=0)i=r[s],i.type===t&&(i.fn===n||!n)&&r.splice(s,1)},publishAsync:function(e,t,n){var r=this;setTimeout(function(){r.publish(e,t,n)},0)},publish:function(e,t,n){var r=this._setEntry(e,"subscriptions"),i=[],s=0,o=r.subscriptions,u=o.length,a=r.receivers,f;for(;s<u;s++)f=o[s],f.type===t&&i.push(f);u=i.length;for(s=0;s<u;s++)i[s].fn(n);if(!a)return;u=a.length;for(s=0;s<u;s++)this.publish(a[s],t,n)},inform:function(e,t){if(!e||!t)return!1;var n=this._setEntry(e,"receivers");return n.receivers.push(t),!0},conceal:function(e,t){if(!e||!t)return!1;var n=this._getEntryProp(e,"receivers");if(!n)return!1;var r=n.length,i;while(--r>=0){i=n[r];if(i===t)return n.splice(r,1),!0}return!1}}}),define("conditioner/contains",[],function(){var e=document?document.body:null;return e&&e.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:e&&e.contains?function(e,t){return e!=t&&e.contains(t)}:function(e,t){var n=t.parentNode;while(n){if(n===e)return!0;n=n.parentNode}return!1}}),define("conditioner/matchesSelector",[],function(){var e=null,t=null,n=document?document.body:null;return!n||n.matches?t="matches":n.webkitMatchesSelector?t="webkitMatchesSelector":n.mozMatchesSelector?t="mozMatchesSelector":n.msMatchesSelector?t="msMatchesSelector":n.oMatchesSelector&&(t="oMatchesSelector"),t?function(e,n){return e[t](n)}:function(e,t){var n=(e.parentNode||document).querySelectorAll(t)||[],r=n.length;while(r--)if(n[r]==e)return!0;return!1}}),define("conditioner/mergeObjects",[],function(){var e=function(t,n){var r=Array.isArray(n),i=r&&[]||{};return n=n||{},r?(t=t||[],i=i.concat(t),n.forEach(function(n,r){typeof n=="object"?i[r]=e(t[r],n):t.indexOf(n)===-1&&i.push(n)})):(t&&typeof t=="object"&&Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.keys(n).forEach(function(r){typeof n[r]!="object"||!n[r]?i[r]=n[r]:t[r]?i[r]=e(t[r],n[r]):i[r]=n[r]})),i};return e}),define("conditioner",["require","conditioner/Observer","conditioner/contains","conditioner/matchesSelector","conditioner/mergeObjects"],function(e,t,n,r,i){var s=function(){};s.prototype={succeeds:function(){},getConfig:function(){}};var o=function(e,t){this._expression=e instanceof u||e instanceof o?e:null,this._config=this._expression?null:e,this._negate=typeof t=="undefined"?!1:t};o.prototype=Object.create(s),o.prototype.assignTester=function(e){this._expression=e},o.prototype.getConfig=function(){return this._config?[{expression:this,config:this._config}]:this._expression.getConfig()},o.prototype.succeeds=function(){return this._expression.succeeds?this._expression.succeeds()!==this._negate:!1},o.prototype.toString=function(){return(this._negate?"not ":"")+(this._expression?this._expression.toString():this._config.path+":{"+this._config.value+"}")};var u=function(e,t,n){this._a=e,this._operator=t,this._b=n};u.prototype=Object.create(s),u.prototype.succeeds=function(){return this._operator==="and"?this._a.succeeds()&&this._b.succeeds():this._a.succeeds()||this._b.succeeds()},u.prototype.toString=function(){return"("+this._a.toString()+" "+this._operator+" "+this._b.toString()+")"},u.prototype.getConfig=function(){return[this._a.getConfig(),this._b.getConfig()]};var a={getExpressionsCount:function(e){return e.match(/(:\{)/g).length},fromString:function(e){var t=0,n="",r=[],i="",s=!1,a=!1,f=null,l=null,c=[],h=e.length,p,d,v,m,g,y,b,w,E,S;f||(f=r);for(;t<h;t++){g=e.charCodeAt(t);if(g===123){a=!0,n="",y=t-2;while(y>=0){b=e.charCodeAt(y);if(b===32||b===40)break;n=e.charAt(y)+n,y--}continue}g===125&&(p=f.length-1,d=p+1,s=f[p]==="not",d=s?p:p+1,f[d]=new o({path:n,value:i},s),n="",i="",s=!1,a=!1);if(a){i+=e.charAt(t);continue}g===40&&(f.push([]),c.push(f),f=f[f.length-1]);if(g===32||t===0||g===40){v=e.substr(t,5).match(/and |or |not /g);if(!v)continue;w=v[0],E=w.length-1,f.push(w.substring(0,E)),t+=E}if(g===41||t===h-1)do{l=c.pop();if(f.length===0){f=l;continue}m=0,S=f.length;for(;m<S;m++){if(typeof f[m]!="string")continue;f[m]==="not"?(f.splice(m,2,new o(f[m+1],!0)),m=-1,S=f.length):f[m+1]!=="not"&&(f.splice(m-1,3,new u(f[m-1],f[m],f[m+1])),m=-1,S=f.length)}f.length===1&&l&&(l[l.length-1]=f[0],f=l)}while(t===h-1&&l)}return r.length===1?r[0]:r}},f={_tests:{},_createTest:function(e,n){if(!n.assert)throw new Error('TestRegister._addTest(path,config): "config.assert" is a required parameter.');var r=function(){};return r.supported="support"in n?n.support():!0,r._callbacks=[],r._ready=!1,r._setup=function(e){if(!r.supported)return;r._callbacks.push(e.onchange.bind(e));if(r._ready)return;r._ready=!0,n.setup.call(r,r._measure)},r._measure=function(e){var t="measure"in n?n.measure.call(r._measure,e):!0;if(t){var i=0,s=r._callbacks.length;for(;i<s;i++)r._callbacks[i](e)}},r.prototype.supported=function(){return r.supported},r.prototype.onchange=function(){t.publish(this,"change")},n.arrange?r.prototype.arrange=function(e,t){if(!r.supported)return;n.arrange.call(this,e,t)}:r.prototype.arrange=function(){r._setup(this)},n.measure&&(r.prototype.measure=n.measure),r.prototype.assert=n.assert,r},_findTest:function(e){return this._tests[e]},_storeTest:function(e,t){this._tests[e]=t},getTest:function(t,n){t="conditioner/tests/"+t,e([t],function(e){var r=f._findTest(t);r||(r=f._createTest(t,e),f._storeTest(t,r)),n(new r)})}},l=function(e,n,r){this._test=e,this._expected=n,this._element=r,this._result=!1,this._changed=!0;var i=this;t.subscribe(this._test,"change",function(){i._changed=!0}),this._test.arrange(this._expected,this._element)};l.prototype.succeeds=function(){return this._changed&&(this._changed=!1,this._result=this._test.assert(this._expected,this._element)),this._result};var c={_options:{},_redirects:{},registerModule:function(e,t,n){var r=requirejs.toUrl(e);this._options[r]=t,n&&(this._redirects[n]=e);var i={};i[e]=t,requirejs.config({config:i})},getRedirect:function(e){return this._redirects[e]||e},getModule:function(e){if(!e)throw new Error('ModuleRegistry.getModule(path): "path" is a required parameter.');return this._options[e]||this._options[requirejs.toUrl(e)]}},h=function(e,t){this._suitable=!0;if(typeof e!="string")return;this._suitable=!1,this._element=t,this._onResultsChangedBind=this._onTestResultsChanged.bind(this),this._count=a.getExpressionsCount(e),this._expression=a.fromString(e),this._loadExpressionTests(this._expression.getConfig())};h.prototype={getSuitability:function(){return this._suitable},test:function(){var e=this._expression.succeeds();e!=this._suitable&&(this._suitable=e,t.publish(this,"change"))},_loadExpressionTests:function(e){var t=0,n=e.length;for(;t<n;t++){if(Array.isArray(e[t])){this._loadExpressionTests(e[t]);continue}this._loadTesterToExpression(e[t].config,e[t].expression)}},_loadTesterToExpression:function(e,n){var r=this;f.getTest(e.path,function(i){n.assignTester(new l(i,e.value,r._element)),t.subscribe(i,"change",r._onResultsChangedBind),r._count--,r._count===0&&r._onReady()})},_onReady:function(){this.test(),t.publish(this,"ready",this._suitable)},_onTestResultsChanged:function(){this.test()}};var p=function(e,n,r){if(!e||!n)throw new Error('ModuleController(path,element,options): "path" and "element" are required parameters.');this._path=c.getRedirect(e),this._alias=e,this._element=n,this._options=r||{},this._Module=null,this._module=null,this._conditionsManager=new h(this._options.conditions,this._element),t.subscribe(this._conditionsManager,"ready",this._onInitialized.bind(this)),this._initialized=!this.isModuleConditioned()||this._conditionsManager.getSuitability(),this._available=!1};p.prototype={isModuleAvailable:function(){return this._available=this._conditionsManager.getSuitability(),this._available},isModuleActive:function(){return this._module!==null},isModuleConditioned:function(){return typeof this._options.conditions!="undefined"},hasInitialized:function(){return this._initialized},matchesPath:function(e){return this._path===e||this._alias===e},_onInitialized:function(e){this._initialized=!0,t.subscribe(this._conditionsManager,"change",this._onConditionsChange.bind(this)),t.publish(this,"init",this),e&&this._onBecameAvailable()},_onBecameAvailable:function(){this._available=!0,t.publish(this,"available",this)},_onConditionsChange:function(){var e=this._conditionsManager.getSuitability();this._module&&!e&&this.unload(),!this._module&&e&&this._onBecameAvailable()},load:function(){if(this._Module){this._onLoad();return}var t=this;e([this._path],function(e){t._Module=e,t._onLoad()})},_parseOptionOverrides:function(e){if(typeof e=="string")try{return JSON.parse(e)}catch(t){throw new Error('ModuleController.load(): "options" is not a valid JSON string.')}return e},_parseOptions:function(e,t,n){var r=[],s,o,u={},a={};do s=c.getModule(e),r.push({page:s,module:t.options}),e=t.__superUrl;while(t=t.__super);o=r.length;while(o--)u=i(u,r[o].page),a=i(a,r[o].module);return s=i(a,u),n&&(s=i(s,this._parseOptionOverrides(n))),s},_onLoad:function(){if(!this.isModuleAvailable())return;var e=this._parseOptions(this._path,this._Module,this._options.options);typeof this._Module=="function"?this._module=new this._Module(this._element,e):(this._module=this._Module.load?this._Module.load(this._element,e):null,typeof this._module=="undefined"&&(this._module=this._Module));if(!this._module)throw new Error('ModuleController.load(): could not initialize module, missing constructor or "load" method.');this._element.setAttribute("data-initialized",this._path),t.inform(this._module,this),t.publish(this,"load",this)},unload:function(){return this._available=!1,this._module?(t.conceal(this._module,this),this._module.unload&&this._module.unload(),this._element.removeAttribute("data-initialized"),this._module=null,t.publish(this,"unload",this),!0):!1},execute:function(e,t){if(!this._module)return{status:404,response:null};var n=this._module[e];if(!n)throw new Error('ModuleController.execute(method,params): function specified in "method" not found on module.');return t=t||[],{status:200,response:n.apply(this._module,t)}}};var d=function(e){if(!e)throw new Error('NodeController(element): "element" is a required parameter.');this._element=e,this._element.setAttribute("data-processed","true");var t=this._element.getAttribute("data-priority");this._priority=t?parseInt(t,10):0,this._moduleControllers=[],this._activeModuleController=null,this._activeModuleUnloadBind=this._onActiveModuleUnload.bind(this)};d.hasProcessed=function(e){return e.getAttribute("data-processed")==="true"},d.prototype={load:function(e){if(!e||!e.length)throw new Error("NodeController.load(controllers): Expects an array of module controllers as parameters.");this._moduleControllers=e;var n=0,r=this._moduleControllers.length,i;for(;n<r;n++){i=this._moduleControllers[n];if(i.hasInitialized()){this._onModuleInitialized();continue}t.subscribe(i,"init",this._onModuleInitialized.bind(this))}},getPriority:function(){return this._priority},getElement:function(){return this._element},matchesSelector:function(e,t){return t&&!n(t,this._element)?!1:r(this._element,e,t)},hasLoadedModule:function(){return this._activeModuleController?this._activeModuleController.isModuleActive():!1},getActiveModuleController:function(){return this._activeModuleController},getModuleController:function(e){return this._getModuleControllers(e,!0)},getModuleControllers:function(e){return this._getModuleControllers(e)},_getModuleControllers:function(e,t){if(typeof e=="undefined")return t?this._moduleControllers[0]:this._moduleControllers.concat();var n=0,r=this._moduleControllers.length,i=[],s;for(;n<r;n++){s=this._moduleControllers[n];if(s.matchesPath(e)){if(t)return s;i.push(s)}}return t?null:i},execute:function(e,t){return this._activeModuleController?this._activeModuleController.execute(e,t):{status:404,response:null}},_onModuleInitialized:function(){var e=this._moduleControllers.length;while(--e>=0)if(!this._moduleControllers[e].hasInitialized())return;this._onModulesInitialized()},_onModulesInitialized:function(){var e=this._getSuitableActiveModuleController();e&&this._setActiveModuleController(e);var n=0,r=this._moduleControllers.length;for(;n<r;n++)t.subscribe(this._moduleControllers[n],"available",this._onModuleAvailable.bind(this))},_onModuleAvailable:function(e){var t=0,n=this._moduleControllers.length,r;for(;t<n;t++){r=this._moduleControllers[t];if(r!==e&&r.isModuleAvailable()&&r.isModuleConditioned())return}this._setActiveModuleController(e)},_setActiveModuleController:function(e){if(e===this._activeModuleController)return;this._cleanActiveModuleController(),this._activeModuleController=e,t.subscribe(this._activeModuleController,"unload",this._activeModuleUnloadBind),t.inform(this._activeModuleController,this),this._activeModuleController.load()},_cleanActiveModuleController:function(){if(!this._activeModuleController)return;t.unsubscribe(this._activeModuleController,"unload",this._activeModuleUnloadBind),t.conceal(this._activeModuleController,this),this._activeModuleController.unload(),this._activeModuleController=null},_onActiveModuleUnload:function(){this._cleanActiveModuleController();var e=this._getSuitableActiveModuleController();if(!e)return;this._setActiveModuleController(e)},_getSuitableActiveModuleController:function(){var e=0,t=this._moduleControllers.length,n;for(;e<t;e++){n=this._moduleControllers[e];if(!n.isModuleAvailable())continue;return n}return null}};var v=function(){this._hasLoaded=!1,this._count=arguments.length,this._controllers=[],this._controllerLoadedBind=this._onLoad.bind(this),this._controllerUnloadedBind=this._onUnload.bind(this);var e=0,n;for(;e<this._count;e++){n=arguments[e];if(!n.hasLoadedModule)continue;t.subscribe(n,"load",this._controllerLoadedBind),t.subscribe(n,"unload",this._controllerUnloadedBind),this._controllers.push(n)}this._test()};v.prototype={_onLoad:function(){this._test()},_onUnload:function(){this._unload()},_test:function(){var e=0;for(;e<this._count;e++)if(!this._controllers[e].hasLoadedModule())return;this._load()},_load:function(){this._hasLoaded||(this._hasLoaded=!0,t.publishAsync(this,"load",this._controllers))},_unload:function(){this._hasLoaded&&(this._hasLoaded=!1,t.publish(this,"unload",this._controllers))}};var m=function(){this._options={modules:{}},this._nodes=[]};return m.prototype={init:function(e){e&&this.setOptions(e),this.parse(document)},setOptions:function(e){if(!e)throw new Error('ModuleLoader.setOptions(options): "options" is a required parameter.');this._options=i(this._options,e);var t,n,r,s;for(n in this._options.modules){if(!this._options.modules.hasOwnProperty(n))continue;r=this._options.modules[n],s=typeof r=="string"?r:r.alias,t=typeof r=="string"?null:r.options||{},c.registerModule(n,t,s)}},parse:function(e){if(!e)throw new Error('ModuleLoader.loadModules(context): "context" is a required parameter.');var t=e.querySelectorAll("[data-module]"),n=t.length,r=0,i=[],s;if(!t)return[];for(;r<n;r++){s=t[r];if(d.hasProcessed(s))continue;i.push(new d(s))}i.sort(function(e,t){return e.getPriority()-t.getPriority()}),r=i.length;while(--r>=0)i[r].load(this._getModuleControllersByElement(i[r].getElement()));return this._nodes=this._nodes.concat(i),i},load:function(e,t){if(!t)return null;t=t.length?t:[t];var n,r=0,i=t.length,s=[],o;n=new d(e);for(;r<i;r++)o=t[r],s.push(new p(o.path,e,{conditions:o.conditions,options:o.options}));return n.load(s),this._nodes.push(n),n},sync:function(){var e=Object.create(v.prototype);return arguments.length==1&&!arguments.slice&&(arguments=arguments[0]),v.apply(e,arguments),e},getNode:function(e,t){return this._getNodes(e,t,!0)},getNodes:function(e,t){return this._getNodes(e,t)},_getNodes:function(e,t,n){if(typeof e=="undefined"&&typeof t=="undefined")return n?this._nodes[0]:this._nodes.concat();var r=0,i=this._nodes.length,s=[],o;for(;r<i;r++){o=this._nodes[r];if(o.matchesSelector(e,t)){if(n)return o;s.push(o)}}return n?null:s},_getModuleControllersByElement:function(e){var t=[],n=e.getAttribute("data-module")||"",r=n.charCodeAt(0)===91;if(r){var i;try{i=JSON.parse(n)}catch(s){throw new Error('ModuleLoader.load(context): "data-module" attribute contains a malformed JSON string.')}if(!i)return[];var o=i.length,u=0,a;for(;u<o;u++)a=i[u],t.push(new p(a.path,e,{conditions:a.conditions,options:a.options}))}else n.length&&t.push(new p(n,e,{conditions:e.getAttribute("data-conditions"),options:e.getAttribute("data-options")}));return t}},new m}),define("conditioner/extendClass",[],function(){return function(){var e=arguments[arguments.length-1],t=arguments[0],n,r;return typeof t=="string"?(n=requirejs,r=t,e.__superUrl=t):(n=t,r=arguments[1],e.__superUrl=n.toUrl(r)),e.__super=n(r),e.prototype=Object.create(e.__super.prototype),e}}),requirejs.config({baseUrl:"/static/js/client",paths:{conditioner:"../vendor/rikschennink/conditioner","conditioner/tests":"../vendor/rikschennink/tests",async:"../vendor/millermedeiros/async",reqwest:"../vendor/ded/reqwest",text:"../vendor/jrburke/text",h5f:"../vendor/ryanseddon/h5f",moment:"../vendor/momentjs/moment",hammer:"../vendor/eightmedia/hammer"}}),define("main",["conditioner"],function(e){require(["config"],function(t){e.init(t)})}),define("conditioner/tests/media",[],function(){return{support:function(){return"matchMedia"in window},arrange:function(e){if(e==="supported")return;var t=this;this._mql=window.matchMedia(e),this._mql.addListener(function(){t.onchange()})},assert:function(e){return this.supported()?e==="supported"?this.supported():this._mql.matches:!1}}}),define("conditioner/tests/viewport",[],function(){var e="web";return{setup:function(){var t=(new RegExp('"isCordova":true')).test(localStorage.getItem("app-context.json"));t&&(e=navigator.userAgent.match(/(Android)/)?"android":"ios")},assert:function(t){return t==="hybrid"?e!=="web":e==t}}});